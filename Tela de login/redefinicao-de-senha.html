
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recuperar Senha - Prontuário Médico</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet" />
  <style type="text/tailwindcss">
    body {
      font-family: 'Poppins', sans-serif;
    }
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }
    [type='radio'] {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }
    [type='radio'] + label {
      cursor: pointer;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      transition: all 0.2s ease-in-out;
      text-align: center;
      flex-grow: 1;
    }
    [type='radio']:checked + label {
      --tw-bg-opacity: 1;
      background-color: rgb(37 99 235 / var(--tw-bg-opacity)); /* bg-blue-600 */
      color: white;
      box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    }
  </style>
</head>
<body class="bg-[#F0F7FF]" x-data="{ recoveryMethod: 'email' }">
  <div class="flex min-h-screen flex-col items-center justify-center p-6 sm:p-12">
    <div class="w-full max-w-md">
      <div class="bg-white p-8 md:p-10 rounded-2xl shadow-xl ring-1 ring-gray-200">
        <div class="flex flex-col items-center text-center">
            <div class="h-24 w-24 flex items-center justify-center bg-white rounded-xl mb-4">
              <img src="logotipo-sem-fundo.png" alt="Logotipo do Sistema" class="h-full w-full object-contain">
            </div>
            <h1 class="text-2xl font-bold text-gray-900 mt-2">Esqueceu sua Senha?</h1>
            <p class="text-gray-500 mt-2 mb-8" x-show="recoveryMethod === 'email'">Insira seu e-mail para receber as instruções de recuperação.</p>
            <p class="text-gray-500 mt-2 mb-8" x-show="recoveryMethod === 'sms'" style="display: none;">Insira seu celular para receber as instruções de recuperação.</p>
        </div>

        <form id="recovery-form" action="./confirmacao-de-envio-instrucoes.html" class="space-y-6" novalidate>
          <div>
            <div class="flex justify-center items-center bg-gray-100 rounded-lg p-1 mb-6">
              <input checked="" id="email-option" name="recovery-option" type="radio" value="email" x-model="recoveryMethod" />
              <label class="text-gray-700 font-medium text-sm" for="email-option">Receber por E-mail</label>

              <input id="sms-option" name="recovery-option" type="radio" value="sms" x-model="recoveryMethod" />
              <label class="text-gray-700 font-medium text-sm" for="sms-option">Receber por SMS</label>
            </div>
          </div>
          <div x-show="recoveryMethod === 'email'">
            <label class="sr-only" for="email">Seu E-mail</label>
            <div class="relative">
              <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">mail</span>
              <input class="block w-full pl-12 pr-4 py-3 border border-gray-200 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition" id="email" name="email" placeholder="Seu e-mail" required="" type="email" />
            </div>
            <p id="email-error" class="mt-2 text-xs text-red-600 hidden" role="alert">Por favor, insira um e-mail válido.</p>
          </div>
          <div style="display: none;" x-show="recoveryMethod === 'sms'">
            <label class="sr-only" for="phone">Seu Número de Celular</label>
            <div class="relative">
              <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">sms</span>
              <input class="block w-full pl-12 pr-4 py-3 border border-gray-200 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition" id="phone" name="phone" placeholder="Seu celular com DDD" required="" type="tel" />
            </div>
             <p id="phone-error" class="mt-2 text-xs text-red-600 hidden" role="alert">Por favor, insira um número de telefone válido.</p>
          </div>
          <div>
            <button class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-base font-semibold text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 active:scale-[.98] transition" type="submit">
              Enviar instruções
            </button>
          </div>
        </form>
        <p class="mt-8 text-center text-sm text-gray-600">
          Lembrou da senha?
          <a class="font-medium text-blue-600 hover:text-blue-500" href="./Tela-de-login-aprimorada.html">
            Voltar para o Login
          </a>
        </p>
      </div>
    </div>
  </div>
  <script defer="" src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('recovery-form');
      const emailInput = document.getElementById('email');
      const phoneInput = document.getElementById('phone');
      const emailError = document.getElementById('email-error');
      const phoneError = document.getElementById('phone-error');
      const recoveryMethodRadios = document.querySelectorAll('input[name="recovery-option"]');

      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

      function showError(input, errorElement, message) {
        errorElement.textContent = message;
        input.classList.add('border-red-500', 'focus:ring-red-500');
        errorElement.classList.remove('hidden');
      }

      function clearError(input, errorElement) {
        input.classList.remove('border-red-500', 'focus:ring-red-500');
        errorElement.classList.add('hidden');
      }

      function validateEmail() {
        if (!emailInput.value || !emailRegex.test(emailInput.value)) {
          showError(emailInput, emailError, 'Por favor, insira um e-mail válido.');
          return false;
        }
        clearError(emailInput, emailError);
        return true;
      }

      function validatePhone() {
        const phoneValue = phoneInput.value.replace(/\D/g, '');
        if (!phoneInput.value || phoneValue.length < 10) {
          showError(phoneInput, phoneError, 'Por favor, insira um telefone válido com DDD.');
          return false;
        }
        clearError(phoneInput, phoneError);
        return true;
      }
      
      function maskPhoneOnInput(event) {
        const input = event.target;
        let value = input.value.replace(/\D/g, '');
        value = value.substring(0, 11);
        value = value.replace(/^(\d{2})/, '($1) ');
        value = value.replace(/(\d{4,5})(\d{4})$/, '$1-$2');
        input.value = value;
      }

      emailInput.addEventListener('blur', validateEmail);
      phoneInput.addEventListener('blur', validatePhone);
      phoneInput.addEventListener('input', maskPhoneOnInput);

      form.addEventListener('submit', function(event) {
        let isValid = true;
        const currentMethod = document.querySelector('input[name="recovery-option"]:checked').value;

        if (currentMethod === 'email') {
          isValid = validateEmail();
        } else if (currentMethod === 'sms') {
          isValid = validatePhone();
        }

        if (!isValid) {
          event.preventDefault();
        }
      });
      
      recoveryMethodRadios.forEach(radio => {
          radio.addEventListener('change', () => {
              clearError(emailInput, emailError);
              clearError(phoneInput, phoneError);
          });
      });
    });
  </script>
</body>
</html>
