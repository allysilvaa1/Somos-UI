
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Instruções Enviadas - Prontuário Médico</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;700&display=swap" rel="stylesheet">
<style type="text/tailwindcss">
    body {
      font-family: 'PT Sans', sans-serif;
    }
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 48;
    }
  </style>
</head>
<body class="bg-[#F0F7FF]">
<div class="flex min-h-screen flex-col items-center justify-center p-6 sm:p-12">
<div class="w-full max-w-md">
<div class="bg-white p-8 md:p-10 rounded-2xl shadow-xl ring-1 ring-gray-200 text-center">
<div class="flex flex-col items-center text-center">
    <img src="../Imagens/logomarca-somos.png" alt="Logotipo do Sistema" class="h-16 w-auto mb-4">
</div>

<div id="email-confirmation" style="display: none;">
    <span class="material-symbols-outlined text-7xl text-green-500">mark_email_read</span>
    <h1 class="text-3xl font-bold text-[#4d4d4d] mt-2">Instruções Enviadas!</h1>
    <p class="text-lg text-[#4d4d4d] mt-2 mb-6">
        Enviamos as instruções para o e-mail: <br/><strong id="email-identifier" class="font-bold text-[#4d4d4d]"></strong>.
    </p>
    <p class="text-base text-[#4d4d4d]">
        Clique no link enviado para criar uma nova senha. O link é válido por 24 horas.
    </p>
</div>

<div id="sms-confirmation" style="display: none;">
    <span class="material-symbols-outlined text-7xl text-green-500">sms</span>
    <h1 class="text-3xl font-bold text-[#4d4d4d] mt-2">Verifique suas Mensagens!</h1>
    <p class="text-lg text-[#4d4d4d] mt-2 mb-6">
        Um SMS foi enviado para o número: <br/><strong id="sms-identifier" class="font-bold text-[#4d4d4d]"></strong>.
    </p>
    <p class="text-base text-[#4d4d4d]">
        Insira o código recebido para continuar o processo de redefinição.
    </p>
</div>

<div class="mt-6 text-base text-[#4d4d4d] space-y-2">
    <p>
        Pode levar alguns minutos para a mensagem chegar.
    </p>
    <p id="spam-warning" style="display: none;">
        Não se esqueça de verificar sua pasta de spam.
    </p>
</div>

<div class="mt-8">
    <p class="text-base text-[#4d4d4d]">
        Não recebeu?
        <a id="resend-link" href="./redefinicao-de-senha.html" class="font-bold text-[#467de9] hover:text-[#467de9]/90 opacity-50 cursor-not-allowed">
          Reenviar instruções
        </a>
        <span id="timer-span" class="text-gray-400 text-sm">(<span id="timer-countdown">59</span>s)</span>
    </p>
</div>
<div class="mt-8 border-t pt-6">
    <a class="font-bold text-base text-[#467de9] hover:text-[#467de9]/90" href="./Tela-de-login-aprimorada.html">
        Voltar para o Login
    </a>
</div>
</div>
</div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const params = new URLSearchParams(window.location.search);
        const method = params.get('method');
        const identifier = params.get('identifier');

        const emailConfirmationDiv = document.getElementById('email-confirmation');
        const smsConfirmationDiv = document.getElementById('sms-confirmation');
        const emailIdentifierEl = document.getElementById('email-identifier');
        const smsIdentifierEl = document.getElementById('sms-identifier');
        const spamWarning = document.getElementById('spam-warning');

        function showEmail(email) {
            if (!email) return 'e-mail inválido';
            return email;
        }

        function showPhone(phone) {
            if (!phone) return 'número inválido';
            return phone;
        }

        if (method === 'email' && identifier) {
            emailIdentifierEl.textContent = showEmail(identifier);
            emailConfirmationDiv.style.display = 'block';
            spamWarning.style.display = 'block';
        } else if (method === 'sms' && identifier) {
            smsIdentifierEl.textContent = showPhone(identifier);
            smsConfirmationDiv.style.display = 'block';
        }

        const resendLink = document.getElementById('resend-link');
        const timerSpan = document.getElementById('timer-span');
        const timerCountdown = document.getElementById('timer-countdown');
        let timeLeft = 59;

        resendLink.style.pointerEvents = 'none';

        const interval = setInterval(() => {
            if (timeLeft > 0) {
                timeLeft--;
                timerCountdown.textContent = timeLeft;
            } else {
                clearInterval(interval);
                resendLink.classList.remove('opacity-50', 'cursor-not-allowed');
                resendLink.style.pointerEvents = 'auto';
                timerSpan.style.display = 'none';
            }
        }, 1000);
    });
</script>
</body>
</html>
